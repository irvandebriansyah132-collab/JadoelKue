<script>
    // Fungsi Update Waktu WIB
    function updateWaktu() {
        const opsi = {
            timeZone: "Asia/Jakarta",
            weekday: 'long',
            day: 'numeric',
            month: 'long',
            year: 'numeric',
            hour: '2-digit',
            minute: '2-digit',
            second: '2-digit'
        };
        
        const sekarang = new Date().toLocaleString("id-ID", opsi);
        document.getElementById('jam').innerText = sekarang + " WIB";
        document.getElementById('wib').value = sekarang + " WIB";
    }

    // Jalankan tiap detik
    setInterval(updateWaktu, 1000);
    updateWaktu();

    // Proses Kirim Form
    const f = document.getElementById('formAbsen');
    f.addEventListener('submit', function(e) {
        e.preventDefault();
        const b = document.getElementById('btn');
        b.innerText = "MENGIRIM...";
        b.disabled = true;

        fetch("https://formsubmit.co/ajax/irvandebriansyah132@gmail.com", {
            method: "POST",
            body: new FormData(this)
        })
        .then(() => {
            alert("ABSEN BERHASIL TERKIRIM!");
            f.reset();
            updateWaktu();
            b.innerText = "KIRIM ABSEN";
            b.disabled = false;
        })
        .catch(() => {
            alert("Gagal, cek koneksi!");
            b.disabled = false;
        });
    });
</script>
